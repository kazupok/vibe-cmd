# コード分析・レビューコマンド

## 概要
コードベースの品質分析、セキュリティチェック、アーキテクチャ評価等を行うためのAIアシスタント向けコマンド定義

## コマンド一覧

### 1. コード品質分析

#### `analyze_code_quality`
コードベース全体の品質を包括的に分析する

**使用例:**
```
$analyze_code_quality$
```

**実行内容:**
1. 静的解析の実行
2. コード複雑度の測定
3. 技術的負債の特定
4. 改善提案の作成
5. 品質レポートの生成

**分析項目:**
```
1. 複雑度指標
   - サイクロマティック複雑度
   - 認知的複雑度
   - 依存関係の深さ
   - ファイルサイズ

2. 保守性指標
   - 重複コード率
   - 命名規則準拠率
   - コメント率
   - テストカバレッジ

3. 技術的負債
   - TODO/FIXMEの数
   - 非推奨APIの使用
   - セキュリティ警告
   - パフォーマンス問題
```

### 2. セキュリティ監査

#### `audit_security`
セキュリティ脆弱性の検出と対策提案を行う

**使用例:**
```
$audit_security$
```

**実行内容:**
1. 脆弱性スキャンの実行
2. セキュリティパターンの確認
3. 認証・認可の検証
4. データ保護の評価
5. セキュリティレポートの作成

**チェック項目:**
```
1. 入力検証
   - SQLインジェクション対策
   - XSS対策
   - CSRFトークン
   - 入力サニタイゼーション

2. 認証・認可
   - パスワードポリシー
   - セッション管理
   - アクセス制御
   - JWT設定

3. データ保護
   - 暗号化実装
   - 機密情報の露出
   - ログ出力内容
   - 環境変数管理
```

### 3. アーキテクチャ分析

#### `analyze_architecture`
システムアーキテクチャの構造と品質を分析する

**使用例:**
```
$analyze_architecture$
```

**実行内容:**
1. モジュール構造の分析
2. 依存関係の可視化
3. 設計パターンの確認
4. アーキテクチャ違反の検出
5. 改善提案の作成

**分析観点:**
```
1. 構造品質
   - レイヤー分離
   - 責任分担
   - 結合度・凝集度
   - インターフェース設計

2. 設計原則
   - SOLID原則
   - DRY原則
   - KISS原則
   - YAGNI原則

3. パターン適用
   - デザインパターン
   - アーキテクチャパターン
   - 統合パターン
   - データパターン
```

### 4. パフォーマンス分析

#### `analyze_performance`
アプリケーションのパフォーマンス特性を分析する

**使用例:**
```
$analyze_performance$
```

**実行内容:**
1. パフォーマンスプロファイリング
2. ボトルネック特定
3. メモリ使用量分析
4. 応答時間測定
5. 最適化提案の作成

**測定項目:**
```
1. 実行時間
   - API応答時間
   - データベースクエリ時間
   - 画面描画時間
   - バッチ処理時間

2. リソース使用量
   - CPU使用率
   - メモリ使用量
   - ディスクI/O
   - ネットワーク帯域

3. スケーラビリティ
   - 同時接続数
   - スループット
   - レスポンスタイム分布
   - エラー率
```

### 5. 依存関係分析

#### `analyze_dependencies`
プロジェクトの依存関係を分析し、リスクを評価する

**使用例:**
```
$analyze_dependencies$
```

**実行内容:**
1. 依存関係ツリーの構築
2. 脆弱性チェック
3. ライセンス確認
4. 更新可能性の評価
5. 依存関係レポートの作成

**分析内容:**
```
1. 脆弱性
   - 既知の脆弱性
   - セキュリティアドバイザリ
   - CVEスコア
   - 修正版の有無

2. ライセンス
   - ライセンス種別
   - 互換性チェック
   - 商用利用可否
   - 配布制限

3. 保守性
   - 最終更新日
   - メンテナンス状況
   - コミュニティ活動
   - 代替ライブラリ
```

## レポート形式

### 品質レポート
```markdown
# コード品質分析レポート

## サマリー
- 全体スコア: [0-100]
- 主要な問題: [件数]
- 改善優先度: [High/Medium/Low]

## 詳細分析
### 複雑度
- ファイル別複雑度ランキング
- 関数別複雑度ランキング
- 改善推奨箇所

### 技術的負債
- 重複コード一覧
- 長すぎる関数
- 深いネスト構造

## 改善提案
1. 即座に対応すべき項目
2. 中期的な改善項目
3. 長期的な技術投資項目
```

### セキュリティレポート
```markdown
# セキュリティ監査レポート

## リスクサマリー
- Critical: [件数]
- High: [件数]
- Medium: [件数]
- Low: [件数]

## 脆弱性詳細
### [脆弱性名]
- **重要度**: Critical
- **影響範囲**: [説明]
- **対策**: [具体的な修正方法]
- **参考**: [CVE番号やドキュメント]

## 推奨事項
1. 緊急対応が必要な項目
2. セキュリティ強化施策
3. 定期的な監視項目
```

## 実行ガイドライン

### 分析の頻度
- **日次**: セキュリティスキャン
- **週次**: コード品質分析
- **月次**: アーキテクチャ分析
- **四半期**: 包括的な技術監査

### 改善アクション
1. **Critical**: 即座に対応
2. **High**: 1週間以内に対応
3. **Medium**: 1ヶ月以内に計画
4. **Low**: 次回リファクタリング時に考慮