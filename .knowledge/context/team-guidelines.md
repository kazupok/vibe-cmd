# チーム作業指針

## コミュニケーション

### 原則
1. **透明性**: 情報はデフォルトで共有
2. **非同期優先**: 時差を考慮したコミュニケーション
3. **建設的**: 批判ではなく改善提案
4. **簡潔明瞭**: 要点を明確に伝える

### ツール
- **GitHub Issues**: 機能要望、バグ報告
- **GitHub Discussions**: 技術的な議論、質問
- **Pull Request**: コードレビュー、実装議論
- **Discord/Slack**: リアルタイムコミュニケーション

### コミュニケーションガイドライン
```markdown
## Issue作成時
- タイトルは具体的に（例：「エラー」→「ワークスペース作成時に500エラー」）
- 再現手順を明記
- 期待される動作と実際の動作を説明
- 環境情報を含める

## PR作成時
- 変更の目的を明確に記載
- 関連するIssue番号をリンク
- スクリーンショットや動作確認手順を追加
- レビュアーへの質問事項を明記
```

## 開発プロセス

### ブランチ戦略
```
main
 └── develop
      ├── feature/issue-{number}-{description}
      ├── fix/issue-{number}-{description}
      └── chore/{description}
```

### 開発フロー
1. **Issue作成/選択**
   - 作業内容を明確化
   - 見積もりとスコープ定義

2. **ブランチ作成**
   ```bash
   git checkout -b feature/issue-123-add-workspace-api
   ```

3. **実装**
   - 小さなコミットを心がける
   - テストを同時に書く
   - ドキュメントを更新

4. **プルリクエスト**
   - セルフレビューを実施
   - CI/CDの結果を確認
   - レビュアーをアサイン

5. **コードレビュー**
   - 24時間以内にレビュー開始
   - 建設的なフィードバック
   - 承認後にマージ

### コミットメッセージ
```
<type>(<scope>): <subject>

<body>

<footer>
```

#### 例
```
feat(workspace): ワークスペース削除APIを追加

- 論理削除の実装
- 権限チェックの追加
- 関連データのカスケード処理

Closes #123
```

## コードレビュー

### レビュアーの心得
1. **コードを尊重**: 人ではなくコードにフォーカス
2. **具体的な提案**: 「良くない」ではなく「こうすると良い」
3. **質問を活用**: 「なぜこの実装？」で理解を深める
4. **ポジティブなフィードバック**: 良い点も積極的に言及

### レビューチェックリスト
- [ ] 機能要件を満たしているか
- [ ] テストは十分か
- [ ] パフォーマンスへの影響
- [ ] セキュリティの考慮
- [ ] コーディング規約の遵守
- [ ] ドキュメントの更新

### レビューコメントの例
```typescript
// 👍 良い例
// より読みやすくするため、早期リターンを使用することを提案します：
if (!user) {
  return Result.fail('User not found');
}
// 処理を続行...

// 👎 悪い例
// このコードは読みにくい
```

## 品質管理

### テスト方針
1. **テストカバレッジ**: 80%以上を目標
2. **テストの種類**:
   - ユニットテスト: ビジネスロジック
   - 統合テスト: API、データベース
   - E2Eテスト: 重要なユーザーフロー

### テスト作成ガイドライン
```typescript
describe('機能名', () => {
  describe('メソッド名', () => {
    it('期待される動作を日本語で記述', () => {
      // Arrange: 準備
      // Act: 実行
      // Assert: 検証
    });
  });
});
```

### CI/CD
- **プルリクエスト時**:
  - リント
  - 型チェック
  - ユニットテスト
  - ビルド

- **マージ時**:
  - 統合テスト
  - セキュリティスキャン
  - デプロイ（develop環境）

## ドキュメント

### ドキュメント作成原則
1. **コードと同期**: 実装と同時に更新
2. **読者視点**: 初めて読む人を想定
3. **実例重視**: コードサンプルを豊富に
4. **メンテナンス**: 定期的な見直し

### ドキュメントの種類
- **README.md**: プロジェクト概要、セットアップ
- **API仕様**: OpenAPI/GraphQLスキーマ
- **アーキテクチャ**: 設計判断、図解
- **運用手順**: デプロイ、トラブルシューティング

## セキュリティ

### セキュリティ原則
1. **最小権限の原則**: 必要最小限のアクセス権
2. **多層防御**: 複数のセキュリティレイヤー
3. **監査証跡**: すべての重要操作をログ記録

### セキュリティチェックリスト
- [ ] 入力値検証
- [ ] 認証・認可の確認
- [ ] SQLインジェクション対策
- [ ] XSS対策
- [ ] シークレットの管理
- [ ] 依存関係の脆弱性チェック

### インシデント対応
1. **発見**: セキュリティ問題を発見
2. **報告**: セキュリティチャンネルに報告
3. **評価**: 影響範囲と重要度を評価
4. **対応**: パッチ作成とデプロイ
5. **事後分析**: 再発防止策の検討

## オンボーディング

### 新メンバー向けチェックリスト
- [ ] 開発環境のセットアップ
- [ ] ドキュメントの確認
- [ ] コードベースの理解
- [ ] 最初のIssueの選択
- [ ] チームメンバーとの顔合わせ

### メンター制度
- 新メンバーには経験者をメンターとして割り当て
- 最初の1ヶ月は週次で1on1
- 質問しやすい環境作り

## 意思決定

### 技術的意思決定
1. **提案**: GitHub DiscussionでRFC作成
2. **議論**: コミュニティからのフィードバック
3. **決定**: コアチームで最終決定
4. **文書化**: 決定事項をADR（Architecture Decision Record）として記録

### ADRテンプレート
```markdown
# ADR-001: {タイトル}

## ステータス
提案中/承認済み/却下/置き換え済み

## コンテキスト
なぜこの決定が必要か

## 決定
何を決定したか

## 結果
この決定による影響

## 代替案
検討した他の選択肢
```

## 継続的改善

### レトロスペクティブ
- 月次で実施
- Keep/Problem/Tryフレームワーク
- アクションアイテムの設定と追跡

### メトリクス
- デプロイ頻度
- リードタイム
- 障害復旧時間
- 変更失敗率

### 学習文化
- 技術記事の共有
- 社内勉強会
- カンファレンス参加支援
- OSSコントリビューション推奨