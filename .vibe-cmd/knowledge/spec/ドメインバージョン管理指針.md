# ドメインバージョン管理指針

**更新日**: 2025-01-08  
**対象**: ドメイン機能マップの管理方法

## 概要

このドキュメントでは、現在開発中のバージョンに対する修正・追加の管理方法を定義します。

## リビジョン管理システム

### リビジョン番号の付け方
- **r1, r2, r3...** : 順次インクリメント
- **緊急修正時**: r2.1, r2.2 のように小数点で管理

### 更新タイミング
1. **機能追加時**: 新しいチェック項目が追加された時
2. **仕様変更時**: 既存機能の仕様が変更された時  
3. **バグ修正時**: 実装済み機能にバグ修正が入った時
4. **設計変更時**: アーキテクチャや技術スタックが変更された時

## 修正・追加の種類と対応

### 🔧 軽微な修正・バグ修正
**例**: ログイン機能のバグ修正、UIの微調整

**対応方法**:
1. `current.md` のリビジョン番号をインクリメント
2. リビジョン履歴に修正内容を記録
3. 該当機能のステータスは変更しない（既に✅の場合）

```markdown
## リビジョン履歴
- **r2** (2025-01-09): ログイン機能のバグ修正
- **r1** (2025-01-08): 初期バージョン作成
```

### ➕ 機能追加・仕様拡張
**例**: SNSログイン追加、メール送信にスケジュール機能追加

**対応方法**:
1. 新しいチェック項目を追加
2. リビジョン番号をインクリメント
3. 進捗サマリーの総数を更新
4. 必要に応じて `実装計画.md` も更新

```markdown
### 👥 ユーザー管理ドメイン  
- [ ] **認証機能**
  - [x] ユーザー登録
  - [x] ログイン/ログアウト
  - [ ] SNSログイン (r2で追加)
  - [ ] パスワード管理
```

### 🚨 緊急対応・セキュリティ修正
**例**: 脆弱性修正、重大なバグ修正

**対応方法**:
1. 小数点リビジョン番号を使用 (r2.1, r2.2...)
2. 緊急対応であることを明記
3. 修正内容を詳細に記録

```markdown
## リビジョン履歴
- **r2.1** (2025-01-09): 【緊急】認証処理の脆弱性修正
- **r2** (2025-01-09): SNSログイン機能追加
```

## 更新手順

### Step 1: 現状確認
- `current.md` の現在のリビジョンを確認
- 影響範囲を特定

### Step 2: 内容更新
- 該当箇所を修正・追加
- チェックボックスのステータス更新

### Step 3: メタ情報更新
- リビジョン番号をインクリメント
- 最終更新日を変更
- リビジョン履歴に追加

### Step 4: 関連ファイル更新
- `実装計画.md` への影響を確認
- 必要に応じてタスクファイルを更新

## 進捗サマリーの更新

機能追加・削除時は以下も更新：

```markdown
## 進捗サマリー
- **実装完了**: 3/14 機能 (21%) ← 更新
- **開発中**: 2/14 機能 
- **未実装**: 9/14 機能 ← 更新
```

## バージョンアップ時の処理

メジャーリリース時（v0.1.0 → v0.2.0）:

1. `current.md` を `v0.1.0-final.md` としてコピー
2. `current.md` を新バージョン用にリセット
3. リビジョン番号を r1 に戻す

## 注意事項

### ✅ 良い例
- 修正理由を明確に記載
- 影響範囲を特定して更新
- 関連ドキュメントも同時更新

### ❌ 避けるべき例
- リビジョン履歴の記録忘れ
- 進捗サマリーの更新忘れ
- 曖昧な修正内容の記載

## 関連ファイル

- [`current.md`](./versions/current.md) - 現在のドメイン全体図
- [`実装計画.md`](./実装計画.md) - 次期実装計画
- [`tasks/`](./tasks/) - 詳細タスク管理

---

**更新履歴**
- 2025-01-08: 初版作成